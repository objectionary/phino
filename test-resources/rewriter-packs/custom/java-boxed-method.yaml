# SPDX-FileCopyrightText: Copyright (c) 2025 Objectionary.com
# SPDX-License-Identifier: MIT
---
repeat: 10
input: |
  {âŸ¦
    Ï† â†¦ Î¦.jeo.method,
    body â†¦ âŸ¦
      Ï† â†¦ Î¦.jeo.seq.of2,
      i95 â†¦ âŸ¦
        Ï† â†¦ Î¦.jeo.opcode.invokeinterface,
        v96 â†¦ "java/util/stream/IntStream",
        v97 â†¦ "boxed",
        v98 â†¦ "()Ljava/util/stream/Stream;",
        v99 â†¦ Î¦Ì‡.true
      âŸ§,
      i96 â†¦ âŸ¦
        Ï† â†¦ Î¦.jeo.opcode.invokeinterface,
        v96 â†¦ "java/util/stream/LongStream",
        v97 â†¦ "boxed",
        v98 â†¦ "()Ljava/util/stream/Stream;",
        v99 â†¦ Î¦Ì‡.true
      âŸ§
    âŸ§,
    name â†¦ "main"
  âŸ§}
output: |-
  {âŸ¦
    Ï† â†¦ Î¦.jeo.method,
    body â†¦ âŸ¦
      Ï† â†¦ Î¦.jeo.seq.of2,
      i95 â†¦ âŸ¦
        Ï† â†¦ Î¦.hone.box,
        stream-class â†¦ "java/util/stream/IntStream"
      âŸ§,
      i96 â†¦ âŸ¦
        Ï† â†¦ Î¦.hone.box,
        stream-class â†¦ "java/util/stream/LongStream"
      âŸ§
    âŸ§,
    name â†¦ "main"
  âŸ§}
rules:
  custom:
    - name: java boxed method
      pattern: |
        âŸ¦
          Ï† â†¦ Î¦.jeo.opcode.invokeinterface,
          ğœ-stream-class â†¦ ğ‘’-stream-class,
          ğœ-method â†¦ "boxed",
          ğœ-signature â†¦ "()Ljava/util/stream/Stream;",
          ğœ-flag â†¦ Î¦Ì‡.true,
          Ï â†¦ âˆ…
        âŸ§
      result: |
        âŸ¦
          Ï† â†¦ Î¦.hone.box,
          stream-class â†¦ ğ‘’-stream-class
        âŸ§
